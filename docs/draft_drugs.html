
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Decriminalization of drugs &#8212; Jupyter Book Template</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=384b581d" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css?v=be8a1c11" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=3ee479438cf8b5e0d341" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=3ee479438cf8b5e0d341" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=3ee479438cf8b5e0d341"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=efea14e4"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=36754332"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'docs/draft_drugs';</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="#">
  
  
  
  
  
  
    <p class="title logo__title">Jupyter Book Template</p>
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1 current active">
                <a class="reference internal" href="#">
                    Decriminalization of drugs
                </a>
            </li>
        </ul>
        
    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://colab.research.google.com/github/ChiaraPatania/InfoVis/blob/main/docs/docs/draft_drugs.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch onColab"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img src="../_static/images/logo_colab.png">
  </span>
<span class="btn__text-container">Colab</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/ChiaraPatania/InfoVis" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/ChiaraPatania/InfoVis/issues/new?title=Issue%20on%20page%20%2Fdocs/draft_drugs.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/docs/draft_drugs.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Decriminalization of drugs</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Decriminalization of drugs</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#team-information">Team information</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#team-members">Team members</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#group-number">Group Number</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#team-name">Team Name</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction">Introduction</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#dataset-and-preprocessing">Dataset and Preprocessing</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#perspective-1-drugs-should-be-legalized-to-stop-drug-criminalization">Perspective 1 - Drugs should be legalized to stop drug criminalization</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#first-argument-reduction-in-crime-rates">First argument: Reduction in crime rates</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#argument-legalization-reduces-drug-related-crime">Argument: Legalization reduces drug-related crime.</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#second-argument-public-health-and-safety">Second argument: Public health and safety</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#argument-regulation-ensures-the-safety-and-quality-of-substances-reducing-harm-from-adulterated-drugs">Argument: Regulation ensures the safety and quality of substances, reducing harm from adulterated drugs.</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#third-argument-burden-on-criminal-justice-system">Third argument: Burden on criminal justice system</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#argument-legalization-alleviates-the-burden-on-the-criminal-justice-system-and-redirects-resources-to-public-health">Argument: Legalization alleviates the burden on the criminal justice system and redirects resources to public health.</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#second-perspective-drugs-should-not-be-legalized-because-of-the-potential-for-increased-addiction-and-health-issues">Second Perspective - Drugs should not be legalized because of the potential for increased addiction and health issues</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#first-argument-increase-in-addiction-rates">First argument: Increase in addiction rates</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#argument-legalization-leads-to-higher-rates-of-substance-abuse-and-addiction">Argument: Legalization leads to higher rates of substance abuse and addiction.</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#second-argument-public-health">Second argument: Public health</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#argument-increase-in-druguse-and-deaths-related-to-drugs">Argument: increase in druguse and deaths related to drugs</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#third-argument-impact-on-youth">Third argument: Impact on youth</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#argument-legalization-normalizes-drug-use-and-increases-accessibility-particularly-among-young-people">Argument: Legalization normalizes drug use and increases accessibility, particularly among young people.</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#reflection">Reflection</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#work-distribution">Work Distribution</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#references">References</a></li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="decriminalization-of-drugs">
<h1>Decriminalization of drugs<a class="headerlink" href="#decriminalization-of-drugs" title="Link to this heading">#</a></h1>
<p>Informatie Visualisatie, June 18 2024, University of Amsterdam</p>
<section id="team-information">
<h2>Team information<a class="headerlink" href="#team-information" title="Link to this heading">#</a></h2>
<section id="team-members">
<h3>Team members<a class="headerlink" href="#team-members" title="Link to this heading">#</a></h3>
<p>Amanda Jansen,
Vivienne Jansen,
Chiara Patania &amp;
Linde van Saane</p>
</section>
<section id="group-number">
<h3>Group Number<a class="headerlink" href="#group-number" title="Link to this heading">#</a></h3>
<p>L5</p>
</section>
<section id="team-name">
<h3>Team Name<a class="headerlink" href="#team-name" title="Link to this heading">#</a></h3>
<p>Don’t do drugs</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Load image from link</span>
<span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://toronto.ctvnews.ca/content/dam/ctvnews/en/images/2022/8/5/opioid-1-6015385-1659696091659.jpg&#39;</span>

<span class="c1"># Display image from URL with smaller size and subtitle</span>
<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">Image</span><span class="p">,</span> <span class="n">display</span>

<span class="c1"># Set the desired image width and height</span>
<span class="n">width</span> <span class="o">=</span> <span class="mi">600</span>
<span class="n">height</span> <span class="o">=</span> <span class="mi">300</span>

<span class="c1"># Set the subtitle text</span>
<span class="n">subtitle</span> <span class="o">=</span> <span class="s2">&quot;© The Canadian Press / Chad Hipolito&quot;</span>

<span class="c1"># Create an Image instance with the URL</span>
<span class="n">image</span> <span class="o">=</span> <span class="n">Image</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">)</span>

<span class="c1"># Display the image and subtitle</span>
<span class="n">display</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">subtitle</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><img src="https://toronto.ctvnews.ca/content/dam/ctvnews/en/images/2022/8/5/opioid-1-6015385-1659696091659.jpg" width="600" height="300"/></div><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>© The Canadian Press / Chad Hipolito
</pre></div>
</div>
</div>
</div>
</section>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="introduction">
<h1>Introduction<a class="headerlink" href="#introduction" title="Link to this heading">#</a></h1>
<p>The legislation of drugs has been an issue for decades, with strong arguments on both sides of the debate. One perspective argues that drugs should be legalized to stop drug criminalization. Supporters of this view believe that the current approach to drug prohibition has failed, leading to a lot of social and economic problems. They argue that legalization could reduce crime rates, alleviate the burden on the criminal justice system, and redirect resources to more effective public health strategies. Furthermore, they suggest that regulation could ensure the safety and quality of substances, reducing the harm caused by adulterated or unsafe drugs.
Conversely, the other perspective holds that drugs should not be legalized due to the potential for increased addiction and health issues. Critics of legalization argue that making drugs more accessible could lead to higher rates of substance abuse and addiction, resulting in significant public health challenges. They emphasize the potential for increased healthcare costs, the negative impact on families and communities, and the risk of normalizing drug use, particularly among young people.</p>
<p>In 2001 Portugal’s decision to decriminalize drugs marked a critical moment in global drug policy. Rather than punishing individuals caught with small amounts of drugs, Portugal opted to treat drug use as a public health issue. This shift redirected resources from law enforcement towards prevention, treatment, and harm reduction services.
Similarly, Oregon’s historic move in 2021 to decriminalize the possession of small amounts of all drugs, alongside the legalization of psilocybin mushrooms for therapeutic use, has drawn international attention. Oregon’s initiative aims to prioritize addiction treatment and recovery programs over criminal penalties. It reflects a growing acknowledgment in the United States that punitive drug policies have not effectively addressed addiction and related issues, instead perpetuating cycles of incarceration and social harm.</p>
<p>Both Portugal and Oregon exemplify different approaches to addressing drug-related challenges through decriminalization and legalization, respectively. Their experiences contribute valuable insights into the ongoing global discourse on drug policy reform, highlighting alternative strategies that prioritize public health and harm reduction over punitive measures.</p>
<p>During this project we will delve into these contrasting viewpoints, utilizing data visualization to present a comprehensive narrative. By examining the social, economic, and health-related data from the country Portugal and the US state Oregon, we aim to provide a balanced and informative discussion on the future of drug legislation.</p>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="dataset-and-preprocessing">
<h1>Dataset and Preprocessing<a class="headerlink" href="#dataset-and-preprocessing" title="Link to this heading">#</a></h1>
<section id="perspective-1-drugs-should-be-legalized-to-stop-drug-criminalization">
<h2>Perspective 1 - Drugs should be legalized to stop drug criminalization<a class="headerlink" href="#perspective-1-drugs-should-be-legalized-to-stop-drug-criminalization" title="Link to this heading">#</a></h2>
<section id="first-argument-reduction-in-crime-rates">
<h3>First argument: Reduction in crime rates<a class="headerlink" href="#first-argument-reduction-in-crime-rates" title="Link to this heading">#</a></h3>
<section id="argument-legalization-reduces-drug-related-crime">
<h4>Argument: Legalization reduces drug-related crime.<a class="headerlink" href="#argument-legalization-reduces-drug-related-crime" title="Link to this heading">#</a></h4>
<p>The first dataset focusses on drug related crimes and can be found with the following link: <a class="reference external" href="https://www.unodc.org/unodc/en/data-and-analysis/wdr2022_annex.html">https://www.unodc.org/unodc/en/data-and-analysis/wdr2022_annex.html</a>
<br>
The variables in this dataset are: ‘Region’, ‘SubRegion’, ‘Country/Territory’, ‘Type of offence’, ‘Year’, ‘Drugs’, ‘Total’, ‘Males’, ‘Females’, ‘Unknown/Other/Third/Intersex’, ‘Adults’, ‘Juveniles’, ‘Specify year’. For the analyses and data visualisation we have filtered the data to the region Europe, dropped the NaN rows and only focussed on the variables ‘Country/Territory’, ‘Year’ and ‘Total’.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># import pandas as pd</span>
<span class="c1"># import numpy as np</span>
<span class="c1"># import dash</span>
<span class="c1"># from dash import dcc, html</span>
<span class="c1"># from dash.dependencies import Input, Output</span>
<span class="c1"># import plotly.graph_objs as go</span>
<span class="c1"># import plotly.express as px</span>

<span class="c1"># # makeing a dataframe with the data of two separate datasets of the amount of crimes per country, per year. </span>
<span class="c1"># # Most values align, but some are missing in one dataset and not in the other</span>
<span class="c1"># # To make the dataframe as complete as possible, we&#39;ll combine the two datasets</span>

<span class="c1"># crimes_1 = pd.read_csv(&quot;DLOs_europe_1.csv&quot;)</span>
<span class="c1"># crimes_2 = pd.read_csv(&quot;DLOs_europe_2.csv&quot;)</span>

<span class="c1"># crimes_df1 = pd.DataFrame(crimes_1)</span>
<span class="c1"># crimes_df2 = pd.DataFrame(crimes_2)</span>

<span class="c1"># years = [&#39;2022&#39;,&#39;2021&#39;,&#39;2020&#39;,&#39;2019&#39;,&#39;2018&#39;,&#39;2017&#39;,&#39;2016&#39;,&#39;2015&#39;,&#39;2014&#39;,&#39;2013&#39;,&#39;2012&#39;,&#39;2011&#39;,&#39;2010&#39;,&#39;2009&#39;,&#39;2008&#39;,&#39;2007&#39;]</span>

<span class="c1"># # Function to compare values from the two dataframes and return a combined value</span>
<span class="c1"># def compare_values(self_value, other_value):</span>

<span class="c1">#     # if both are Nan, keep Nan in the dataset</span>
<span class="c1">#     if pd.isna(self_value) and pd.isna(other_value):</span>
<span class="c1">#         return np.nan</span>

<span class="c1">#     # if one value is NaN, keep the value of the other dataset</span>
<span class="c1">#     elif pd.isna(self_value):</span>
<span class="c1">#         return other_value</span>
<span class="c1">#     elif pd.isna(other_value):</span>
<span class="c1">#         return self_value</span>
    
<span class="c1">#     # if values are the same</span>
<span class="c1">#     elif self_value == other_value:</span>
<span class="c1">#         return self_value</span>

<span class="c1">#     # if values are different, keep the mean</span>
<span class="c1">#     else:</span>
<span class="c1">#         return (self_value + other_value) / 2</span>

<span class="c1"># # Create a new dictionary to store the combined data from the two dataframes</span>
<span class="c1"># combined_crimes = {&#39;Country&#39;: crimes_df1[&#39;Country&#39;]}</span>

<span class="c1"># # Loop through each year to process the data for that year</span>
<span class="c1"># for year in years:</span>

<span class="c1">#     # Check if the year exists in both dataframes</span>
<span class="c1">#     if year in crimes_df1.columns and year in crimes_df2.columns:</span>
        
<span class="c1">#         # For each row, apply a the compare_values() function to compare and combine the values from both dataframes</span>
<span class="c1">#         combined_crimes[year] = crimes_df1.apply(</span>
<span class="c1">#             lambda row: compare_values(</span>

<span class="c1">#                 # Value from the first dataframe</span>
<span class="c1">#                 row[year], </span>

<span class="c1">#                 # Corresponding value from the second dataframe</span>
<span class="c1">#                 crimes_df2.loc[crimes_df2[&#39;Country&#39;] == row[&#39;Country&#39;], year].values[0]</span>

<span class="c1">#                 # Use np.nan if the country is not in the second dataframe</span>
<span class="c1">#                 if row[&#39;Country&#39;] in crimes_df2[&#39;Country&#39;].values else np.nan </span>

<span class="c1">#             ), axis=1</span>
<span class="c1">#         )</span>
        
<span class="c1">#     # If the year exists only in the first dataframe, use those values</span>
<span class="c1">#     elif year in crimes_df1.columns:</span>
<span class="c1">#         combined_crimes[year] = crimes_df1[year]</span>

<span class="c1">#     # Same for the second dataframe</span>
<span class="c1">#     elif year in crimes_df2.columns:</span>
<span class="c1">#         combined_crimes[year] = crimes_df2[year]</span>

<span class="c1">#     # If the year exists in neither dataframe, use np.nan</span>
<span class="c1">#     else:</span>
<span class="c1">#         combined_crimes[year] = np.nan</span>

<span class="c1"># # Convert the dictionary to a DataFrame</span>
<span class="c1"># crimes_combined_df = pd.DataFrame(combined_crimes)</span>


<span class="c1"># # Making a dataframe for amount of crimes per 1000 inhabitants</span>

<span class="c1"># inhabitants = pd.read_csv(&quot;Population_europe.csv&quot;)</span>
<span class="c1"># inhabitants_df = inhabitants[[&#39;Country Name&#39;] + years]</span>
<span class="c1"># inhabitants_df.rename(columns={&#39;Country Name&#39;: &#39;Country&#39;}, inplace=True)</span>

<span class="c1"># # Function to calculate the number of crimes per 1000 inhabitants</span>
<span class="c1"># def calc_per_100_inhabitants(row, year):</span>
<span class="c1">#     if pd.isna(row[f&#39;{year}&#39;]):</span>
<span class="c1">#         return np.nan</span>
<span class="c1">#     else:</span>
<span class="c1">#         return round(row[f&#39;{year}&#39;] / (inhabitants_df.at[row.name, f&#39;{year}&#39;] / 1000), 3)</span>

<span class="c1"># # Create a new DataFrame with the crime data per 1000 inhabitants</span>
<span class="c1"># per_inhabitants_df = crimes_combined_df.copy()</span>

<span class="c1"># for year in years:</span>
<span class="c1">#     if year in crimes_combined_df.columns and year in inhabitants_df.columns:</span>
<span class="c1">#         per_inhabitants_df[year] = crimes_combined_df.apply(lambda row: calc_per_100_inhabitants(row, year), axis=1)</span>

<span class="c1"># per_inhabitants_df.reset_index(drop=True, inplace=True)</span>

<span class="c1"># # make interactive barplot</span>

<span class="c1"># app1 = dash.Dash(__name__)</span>

<span class="c1"># # html layout of the Dash application</span>
<span class="c1"># app1.layout = html.Div([</span>
<span class="c1">#     html.H1(&quot;Comparison of the amount of drug crimes per year in portugal and other countries&quot;),</span>

<span class="c1">#     html.Label(&quot;Select countries (Portugal is always included):&quot;),</span>
<span class="c1">#     dcc.Dropdown(</span>
<span class="c1">#         id=&#39;country-selector&#39;,</span>
<span class="c1">#         options=[{&#39;label&#39;: i, &#39;value&#39;: i} for i in crimes_combined_df[&#39;Country&#39;].unique() if i != &#39;Portugal&#39;],</span>
<span class="c1">#         value=[&#39;France&#39;, &#39;Spain&#39;], </span>
<span class="c1">#         multi=True</span>
<span class="c1">#     ),</span>

<span class="c1">#     html.Label(&quot;Selecteer Jaren:&quot;),</span>
<span class="c1">#     dcc.Dropdown(</span>
<span class="c1">#         id=&#39;year-selector&#39;,</span>
<span class="c1">#         options=[{&#39;label&#39;: i, &#39;value&#39;: i} for i in crimes_combined_df.columns if i != &#39;Country&#39;],</span>
<span class="c1">#         value=[&#39;2021&#39;, &#39;2017&#39;,&#39;2012&#39;, &#39;2007&#39;], </span>
<span class="c1">#         multi=True</span>
<span class="c1">#     ),</span>
<span class="c1">#     html.Label(&quot;Select Scale:&quot;),</span>
<span class="c1">#     dcc.Dropdown(</span>
<span class="c1">#         id=&#39;scale-selector&#39;,</span>
<span class="c1">#         options=[</span>
<span class="c1">#             {&#39;label&#39;: &#39;Linear&#39;, &#39;value&#39;: &#39;linear&#39;},</span>
<span class="c1">#             {&#39;label&#39;: &#39;Logarithmic&#39;, &#39;value&#39;: &#39;log&#39;}</span>
<span class="c1">#         ],</span>
<span class="c1">#         value=&#39;log&#39;, </span>
<span class="c1">#     ),</span>
<span class="c1">#     html.Label(&quot;Select unit:&quot;),</span>
<span class="c1">#     dcc.Dropdown(</span>
<span class="c1">#         id=&#39;data-selector&#39;,</span>
<span class="c1">#         options=[</span>
<span class="c1">#             {&#39;label&#39;: &#39;Totaal amount of cases&#39;, &#39;value&#39;: &#39;total&#39;},</span>
<span class="c1">#             {&#39;label&#39;: &#39;cases/1000 inhabitants&#39;, &#39;value&#39;: &#39;per_inhabitants&#39;}</span>
<span class="c1">#         ],</span>
<span class="c1">#         value=&#39;total&#39;, </span>
<span class="c1">#     ),</span>
<span class="c1">#     dcc.Graph(id=&#39;bar-plot&#39;),</span>
<span class="c1">#     html.Div(id=&#39;missing-data-warning&#39;, style={&#39;color&#39;: &#39;red&#39;, &#39;margin-top&#39;: &#39;20px&#39;})</span>
<span class="c1"># ], style={&#39;backgroundColor&#39;: &#39;lightgrey&#39;, &#39;padding&#39;: &#39;20px&#39;})</span>

<span class="c1"># # Define the callback to update the graph and warning text</span>
<span class="c1"># @app1.callback(</span>
<span class="c1">#     [Output(&#39;bar-plot&#39;, &#39;figure&#39;), Output(&#39;missing-data-warning&#39;, &#39;children&#39;)],</span>
<span class="c1">#     [Input(&#39;country-selector&#39;, &#39;value&#39;),</span>
<span class="c1">#      Input(&#39;year-selector&#39;, &#39;value&#39;),</span>
<span class="c1">#      Input(&#39;scale-selector&#39;, &#39;value&#39;),</span>
<span class="c1">#      Input(&#39;data-selector&#39;, &#39;value&#39;)]</span>
<span class="c1"># )</span>

<span class="c1"># def update_graph(selected_countries, selected_years, selected_scale, selected_data):</span>
<span class="c1">#     selected_countries.append(&#39;Portugal&#39;) </span>

<span class="c1">#     # Choose the correct dataset based on the selected data type</span>
<span class="c1">#     filtered_df = per_inhabitants_df if selected_data == &#39;per_inhabitants&#39; else crimes_combined_df</span>

<span class="c1">#     # Filter the dataframe based on the selected countries and years</span>
<span class="c1">#     filtered_df = filtered_df[filtered_df[&#39;Country&#39;].isin(selected_countries)].copy()</span>
<span class="c1">#     filtered_df = filtered_df.melt(id_vars=[&#39;Country&#39;], value_vars=selected_years, var_name=&#39;Year&#39;, value_name=&#39;Cases&#39;)</span>
    
<span class="c1">#     # make sure Portugal is always the first country in the plots</span>
<span class="c1">#     country_order = [&#39;Portugal&#39;] + sorted([c for c in selected_countries if c != &#39;Portugal&#39;])</span>
    
<span class="c1">#     bars = []</span>
<span class="c1">#     missing_data_info = []</span>
<span class="c1">#     warning_text = &quot;&quot;</span>

<span class="c1">#     # Loop through each country to create bar plots and track missing data</span>
<span class="c1">#     for country in country_order:</span>
<span class="c1">#         country_data = filtered_df[filtered_df[&#39;Country&#39;] == country]</span>
<span class="c1">#         bars.append(go.Bar(</span>
<span class="c1">#             x=country_data[pd.notna(country_data[&#39;Cases&#39;])][&#39;Year&#39;],</span>
<span class="c1">#             y=country_data[pd.notna(country_data[&#39;Cases&#39;])][&#39;Cases&#39;],</span>
<span class="c1">#             name=country</span>
<span class="c1">#         ))</span>

<span class="c1">#         nan_data = country_data[pd.isna(country_data[&#39;Cases&#39;])]</span>
<span class="c1">#         if not nan_data.empty:</span>
<span class="c1">#             missing_data_info.append(f&quot;{country} ({&#39;, &#39;.join(nan_data[&#39;Year&#39;])})&quot;)</span>
    
<span class="c1">#     fig = go.Figure(data=bars)</span>
<span class="c1">#     fig.update_layout(</span>
<span class="c1">#         paper_bgcolor=&#39;lightgrey&#39;,</span>
<span class="c1">#         plot_bgcolor=&#39;white&#39;, </span>
<span class="c1">#         font=dict(color=&#39;black&#39;),  </span>
<span class="c1">#         yaxis_type=selected_scale,</span>
<span class="c1">#         title= &quot;Amount of drug crimes per year for the selected years and countries&quot;,</span>
<span class="c1">#         xaxis_title=&quot;Year&quot;, </span>
<span class="c1">#         yaxis_title= &quot;Number of Crimes&quot; if selected_data == &#39;total&#39; else &quot;Crimes per 1000 Inhabitants&quot;</span>
<span class="c1">#     )</span>

<span class="c1">#     # Generate the warning text for missing data</span>
<span class="c1">#     warning_text = &quot;&quot;</span>
<span class="c1">#     if missing_data_info:</span>
<span class="c1">#         warning_text = &quot;Please note that the following countries/years contain missing data: &quot; + &quot;; &quot;.join(missing_data_info)</span>
    
<span class="c1">#     return fig, warning_text</span>

<span class="c1"># # Run the Dash application</span>
<span class="c1"># if __name__ == &#39;__main__&#39;:</span>
<span class="c1">#     app1.run_server(debug=True)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">dash</span>
<span class="kn">from</span> <span class="nn">dash</span> <span class="kn">import</span> <span class="n">dcc</span><span class="p">,</span> <span class="n">html</span>
<span class="kn">from</span> <span class="nn">dash.dependencies</span> <span class="kn">import</span> <span class="n">Input</span><span class="p">,</span> <span class="n">Output</span>
<span class="kn">import</span> <span class="nn">plotly.graph_objects</span> <span class="k">as</span> <span class="nn">go</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;Treatment.csv&quot;</span><span class="p">)</span>
<span class="n">df_transposed</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;Country&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>

<span class="n">app1</span> <span class="o">=</span> <span class="n">dash</span><span class="o">.</span><span class="n">Dash</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="n">app1</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">([</span>
    <span class="n">dcc</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="s1">&#39;country-select&#39;</span><span class="p">,</span>
        <span class="n">options</span><span class="o">=</span><span class="p">[{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="n">country</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="n">country</span><span class="p">}</span> <span class="k">for</span> <span class="n">country</span> <span class="ow">in</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Country&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()],</span>
        <span class="n">value</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Portugal&#39;</span><span class="p">],</span> 
        <span class="n">multi</span><span class="o">=</span><span class="kc">True</span>  
    <span class="p">),</span>
    <span class="n">dcc</span><span class="o">.</span><span class="n">Graph</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s1">&#39;line-chart&#39;</span><span class="p">)</span>
<span class="p">])</span>

<span class="nd">@app1</span><span class="o">.</span><span class="n">callback</span><span class="p">(</span>
    <span class="n">Output</span><span class="p">(</span><span class="s1">&#39;line-chart&#39;</span><span class="p">,</span> <span class="s1">&#39;figure&#39;</span><span class="p">),</span>
    <span class="p">[</span><span class="n">Input</span><span class="p">(</span><span class="s1">&#39;country-select&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">)]</span>
<span class="p">)</span>
<span class="k">def</span> <span class="nf">update_chart</span><span class="p">(</span><span class="n">selected_countries</span><span class="p">):</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Figure</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">country</span> <span class="ow">in</span> <span class="n">selected_countries</span><span class="p">:</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">add_trace</span><span class="p">(</span><span class="n">go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span>
            <span class="n">x</span><span class="o">=</span><span class="n">df_transposed</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> 
            <span class="n">y</span><span class="o">=</span><span class="n">df_transposed</span><span class="p">[</span><span class="n">country</span><span class="p">],</span> 
            <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;lines+markers&#39;</span><span class="p">,</span> 
            <span class="n">name</span><span class="o">=</span><span class="n">country</span>
        <span class="p">))</span>

    <span class="n">fig</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Data from 2013 to 2021&quot;</span><span class="p">,</span>
        <span class="n">xaxis_title</span><span class="o">=</span><span class="s2">&quot;Year&quot;</span><span class="p">,</span>
        <span class="n">yaxis_title</span><span class="o">=</span><span class="s2">&quot;Value&quot;</span>
    <span class="p">)</span>
    
    <span class="k">return</span> <span class="n">fig</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app1</span><span class="o">.</span><span class="n">run_server</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">8053</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">ModuleNotFoundError</span><span class="g g-Whitespace">                       </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="kn">import</span> <span class="nn">dash</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> <span class="kn">from</span> <span class="nn">dash</span> <span class="kn">import</span> <span class="n">dcc</span><span class="p">,</span> <span class="n">html</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span> <span class="kn">from</span> <span class="nn">dash.dependencies</span> <span class="kn">import</span> <span class="n">Input</span><span class="p">,</span> <span class="n">Output</span>

<span class="ne">ModuleNotFoundError</span>: No module named &#39;dash&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="c1"># Read the CSV file</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;9_Misdaden.csv&quot;</span><span class="p">)</span>

<span class="c1"># Filter for Europe</span>
<span class="n">europe_df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Region&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Europe&#39;</span><span class="p">]</span>

<span class="c1"># Group by Country/Territory and Year, and sum the Total crimes</span>
<span class="n">grouped_df</span> <span class="o">=</span> <span class="n">europe_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;Country/Territory&#39;</span><span class="p">,</span> <span class="s1">&#39;Year&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="s1">&#39;Total&#39;</span><span class="p">:</span> <span class="s1">&#39;sum&#39;</span><span class="p">})</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>

<span class="c1"># Filter for Portugal</span>
<span class="n">portugal_df</span> <span class="o">=</span> <span class="n">grouped_df</span><span class="p">[</span><span class="n">grouped_df</span><span class="p">[</span><span class="s1">&#39;Country/Territory&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Portugal&#39;</span><span class="p">]</span>

<span class="c1"># Calculate the mean for Europe (excluding Portugal)</span>
<span class="n">europe_mean_df</span> <span class="o">=</span> <span class="n">grouped_df</span><span class="p">[</span><span class="n">grouped_df</span><span class="p">[</span><span class="s1">&#39;Country/Territory&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;Portugal&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;Year&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="s1">&#39;Total&#39;</span><span class="p">:</span> <span class="s1">&#39;mean&#39;</span><span class="p">})</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="n">europe_mean_df</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Total&#39;</span><span class="p">:</span> <span class="s1">&#39;Mean of Europe&#39;</span><span class="p">},</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Merge Portugal data with Europe mean data</span>
<span class="n">merged_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">portugal_df</span><span class="p">,</span> <span class="n">europe_mean_df</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s1">&#39;Year&#39;</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">)</span>

<span class="c1"># Plotting</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="c1"># fig.patch.set_facecolor(&#39;#FDE1F0&#39;)  # Light pink background for the entire figure</span>
<span class="c1"># fig.patch.set_edgecolor(&#39;#FDE1F0&#39;)</span>
<span class="c1"># ax.set_facecolor(&#39;#FDE1F0&#39;)  # Light pink background for the plot area</span>

<span class="c1"># Remove axes spines (borders)</span>
<span class="k">for</span> <span class="n">spine</span> <span class="ow">in</span> <span class="n">ax</span><span class="o">.</span><span class="n">spines</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
    <span class="n">spine</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>  <span class="c1"># Hide all spines (borders)</span>


<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">merged_df</span><span class="p">[</span><span class="s1">&#39;Year&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">merged_df</span><span class="p">[</span><span class="s1">&#39;Total&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Portugal&#39;</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;#66c2a5&#39;</span><span class="p">)</span>  <span class="c1"># Pastel green</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">merged_df</span><span class="p">[</span><span class="s1">&#39;Year&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">merged_df</span><span class="p">[</span><span class="s1">&#39;Mean of Europe&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Mean of Europe&#39;</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;#8da0cb&#39;</span><span class="p">)</span>  <span class="c1"># Pastel blue</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Year&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Total Drug-Related Crimes&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Drug-Related Crimes in Portugal vs. Mean of Europe&#39;</span><span class="p">)</span>

<span class="c1"># Set the legend</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>

<span class="c1"># Enable the grid</span>
<span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Show the plot</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="c1"># Set the subtitle text</span>
<span class="n">subtitle</span> <span class="o">=</span> <span class="s2">&quot;Figure 1: Drug-Related crimes in Portugal vs. Mean of Europe, from 2014 until 2020&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">subtitle</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/1a485248347190d4a850e6da5673f9023921d86ea1248f134d80c34851a42f08.png" src="../_images/1a485248347190d4a850e6da5673f9023921d86ea1248f134d80c34851a42f08.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Figure 1: Drug-Related crimes in Portugal vs. Mean of Europe, from 2014 until 2020
</pre></div>
</div>
</div>
</div>
<p>The second dataset used regarding reduction in crime rates can be found with the following link: <a class="reference external" href="https://dataunodc.un.org/">https://dataunodc.un.org/</a>
<br>
The variables in this dataset are: ‘Country’, ‘2021’, ‘2020’,’2019’, ‘2018’, ‘2017’, ‘2016’, ‘2015’, ‘2014’, ‘2013’, ‘2012’, ‘2011’, ‘2010’, ‘2009’, ‘2008’, ‘2007’.
<br>
For the analysis and data visualisation the NaN rows were deleted and the column names renamed for easier acces.</p>
</section>
</section>
<section id="second-argument-public-health-and-safety">
<h3>Second argument: Public health and safety<a class="headerlink" href="#second-argument-public-health-and-safety" title="Link to this heading">#</a></h3>
<section id="argument-regulation-ensures-the-safety-and-quality-of-substances-reducing-harm-from-adulterated-drugs">
<h4>Argument: Regulation ensures the safety and quality of substances, reducing harm from adulterated drugs.<a class="headerlink" href="#argument-regulation-ensures-the-safety-and-quality-of-substances-reducing-harm-from-adulterated-drugs" title="Link to this heading">#</a></h4>
<p>DRAFT
<br>
Supporting Data: Purity of drug, Portugal versus mean of other European countries.
<br>
Data Variables: ‘Country’, ‘Year’, ‘Drugtype’. And then the values will contain the purity of the drug.
<br>
Data visualisation: bar plot with Portugal values in blue and the European mean values in orange (or a couple of countries in different colours), on the x-axis there will be the different types of drugs and on the y-axis the purity of the drug.</p>
</section>
</section>
<section id="third-argument-burden-on-criminal-justice-system">
<h3>Third argument: Burden on criminal justice system<a class="headerlink" href="#third-argument-burden-on-criminal-justice-system" title="Link to this heading">#</a></h3>
<section id="argument-legalization-alleviates-the-burden-on-the-criminal-justice-system-and-redirects-resources-to-public-health">
<h4>Argument: Legalization alleviates the burden on the criminal justice system and redirects resources to public health.<a class="headerlink" href="#argument-legalization-alleviates-the-burden-on-the-criminal-justice-system-and-redirects-resources-to-public-health" title="Link to this heading">#</a></h4>
<p>DRAFT
<br>
Supporting Data: Decrease in prisoners sentenced for drug related offences. While the European average has gradually risen over the past twenty years (from 14 to 18%), the proportion of people sentenced for drug offences in Portuguese prisons has fallen dramatically to 15.7% in 2019 — now below the European average. The data set can be found on <a class="reference external" href="https://wp.unil.ch/space/space-i/annual-reports/">https://wp.unil.ch/space/space-i/annual-reports/</a>
<br>
Data Variables: x
<br>
Data visualisation: Line graph</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">matplotlib.ticker</span> <span class="kn">import</span> <span class="n">PercentFormatter</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="c1"># Read the CSV file</span>
<span class="n">drug_offences_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;drug_offences.csv&#39;</span><span class="p">)</span>

<span class="c1"># Interpolate missing values</span>
<span class="n">drug_offences_df</span> <span class="o">=</span> <span class="n">drug_offences_df</span><span class="o">.</span><span class="n">interpolate</span><span class="p">()</span>

<span class="c1"># Plotting</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">drug_offences_df</span><span class="p">[</span><span class="s1">&#39;Year&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">drug_offences_df</span><span class="p">[</span><span class="s1">&#39;Percentage of prisoners sentenced for drug offences in Portugal&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Portugal&#39;</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;#66c2a5&#39;</span><span class="p">)</span>  <span class="c1"># Pastel green</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">drug_offences_df</span><span class="p">[</span><span class="s1">&#39;Year&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">drug_offences_df</span><span class="p">[</span><span class="s1">&#39;Mean Europe&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Mean of Europe&#39;</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;#8da0cb&#39;</span><span class="p">)</span>  <span class="c1"># Pastel blue</span>

<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Percentage of prisoners convicted for drug-related crimes&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Year&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">PercentFormatter</span><span class="p">())</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>

<span class="c1"># Remove axis lines (spines)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s1">&#39;top&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s1">&#39;right&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s1">&#39;bottom&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s1">&#39;left&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># Hide ticks</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;both&#39;</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s1">&#39;both&#39;</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">left</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># Show the plot</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/25b71390ecf576b881839108150b08add48b319caace1bd1884752cdbcaff5fb.png" src="../_images/25b71390ecf576b881839108150b08add48b319caace1bd1884752cdbcaff5fb.png" />
</div>
</div>
</section>
</section>
</section>
<section id="second-perspective-drugs-should-not-be-legalized-because-of-the-potential-for-increased-addiction-and-health-issues">
<h2>Second Perspective - Drugs should not be legalized because of the potential for increased addiction and health issues<a class="headerlink" href="#second-perspective-drugs-should-not-be-legalized-because-of-the-potential-for-increased-addiction-and-health-issues" title="Link to this heading">#</a></h2>
<section id="first-argument-increase-in-addiction-rates">
<h3>First argument: Increase in addiction rates<a class="headerlink" href="#first-argument-increase-in-addiction-rates" title="Link to this heading">#</a></h3>
<section id="argument-legalization-leads-to-higher-rates-of-substance-abuse-and-addiction">
<h4>Argument: Legalization leads to higher rates of substance abuse and addiction.<a class="headerlink" href="#argument-legalization-leads-to-higher-rates-of-substance-abuse-and-addiction" title="Link to this heading">#</a></h4>
<p>DRAFT
<br>
Supporting Data: Correlation between drug legalization and addiction rates.
<br>
Data Variables: Addiction rates (before and after legalization), rates of treatment admissions for addiction, types of substances used.
<br>
Data visualisation: For example a (interactive) thematic map of US states with addiction rates. Another visualisation containing a line or bar chartshowing the addiction rates before and after legalization.</p>
</section>
</section>
<section id="second-argument-public-health">
<h3>Second argument: Public health<a class="headerlink" href="#second-argument-public-health" title="Link to this heading">#</a></h3>
<section id="argument-increase-in-druguse-and-deaths-related-to-drugs">
<h4>Argument: increase in druguse and deaths related to drugs<a class="headerlink" href="#argument-increase-in-druguse-and-deaths-related-to-drugs" title="Link to this heading">#</a></h4>
<p>In 2021, Oregon passed a law decriminalizing all drugs. Opponents of this law now argue that as a result, deaths due to overdose have spiked in recent years. This trend is depicted in the graph below.
Supporting Data: Deathrate over the years per state. This dataset can be found through the following link: <a class="reference external" href="https://www.cdc.gov/nchs/pressroom/sosmap/drug_poisoning_mortality/drug_poisoning.htm">https://www.cdc.gov/nchs/pressroom/sosmap/drug_poisoning_mortality/drug_poisoning.htm</a>
<br>
Data variables: ‘Location’, ‘Death rate’, ‘Deaths’.
<br>
For the analysis and datavisualisation we have only focussed on a couple of states (Colorado, Georgia, Kansas, Minnesota, Montana, Oregon and Washington) and their death rate over the years.
<br> Another option for visualisation we might add is a map with all the different states and their death rate and death numbers, for a more complete picture.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">pandas</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>

<span class="n">statesdata</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;statesdata.csv&quot;</span><span class="p">)</span>

<span class="n">statesdata</span> <span class="o">=</span> <span class="n">statesdata</span><span class="p">[[</span><span class="s2">&quot;YEAR&quot;</span><span class="p">,</span><span class="s2">&quot;STATE&quot;</span><span class="p">,</span><span class="s2">&quot;RATE&quot;</span><span class="p">]]</span>

<span class="n">pivot_df</span> <span class="o">=</span> <span class="n">statesdata</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s1">&#39;YEAR&#39;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="s1">&#39;STATE&#39;</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s1">&#39;RATE&#39;</span><span class="p">)</span>
<span class="n">or_correlations</span> <span class="o">=</span> <span class="n">pivot_df</span><span class="o">.</span><span class="n">corrwith</span><span class="p">(</span><span class="n">pivot_df</span><span class="p">[</span><span class="s1">&#39;OR&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;OR&#39;</span><span class="p">)</span>

<span class="c1"># states selected for hight correlation and matching rates</span>
<span class="n">desired_states</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;OR&#39;</span><span class="p">,</span><span class="s1">&#39;CO&#39;</span><span class="p">,</span><span class="s1">&#39;GA&#39;</span><span class="p">,</span> <span class="s1">&#39;KS&#39;</span><span class="p">,</span><span class="s1">&#39;MN&#39;</span><span class="p">,</span><span class="s1">&#39;MT&#39;</span><span class="p">,</span><span class="s1">&#39;WA&#39;</span><span class="p">]</span>
<span class="n">statesdata</span> <span class="o">=</span> <span class="n">statesdata</span><span class="p">[</span><span class="n">statesdata</span><span class="p">[</span><span class="s1">&#39;STATE&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">desired_states</span><span class="p">)]</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">statesdata</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;YEAR&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;RATE&#39;</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s1">&#39;STATE&#39;</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="s1">&#39;tab10&#39;</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;o&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">2021</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;2021&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Year&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Death rate&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Deathrate over the years per state&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="c1"># Set the subtitle text</span>
<span class="n">subtitle</span> <span class="o">=</span> <span class="s2">&quot;Figure 3: Deathrate of drug overdose mortality for the states Colorado, Georgia, Kansas, Minnesota, Montana, Oregon and Washington.&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">subtitle</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/usr/local/lib/python3.11/site-packages/numpy/lib/function_base.py:2889: RuntimeWarning: Degrees of freedom &lt;= 0 for slice
  c = cov(x, y, rowvar, dtype=dtype)
/usr/local/lib/python3.11/site-packages/numpy/lib/function_base.py:2748: RuntimeWarning: divide by zero encountered in divide
  c *= np.true_divide(1, fact)
/usr/local/lib/python3.11/site-packages/numpy/lib/function_base.py:2748: RuntimeWarning: invalid value encountered in multiply
  c *= np.true_divide(1, fact)
</pre></div>
</div>
<img alt="../_images/3fe4c040c60e35b916458708641c466bbf27a9547999ba3bf6b577ec6af753f7.png" src="../_images/3fe4c040c60e35b916458708641c466bbf27a9547999ba3bf6b577ec6af753f7.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Figure 3: Deathrate of drug overdose mortality for the states Colorado, Georgia, Kansas, Minnesota, Montana, Oregon and Washington.
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">pandas</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="kn">import</span> <span class="nn">dash</span>
<span class="kn">from</span> <span class="nn">dash</span> <span class="kn">import</span> <span class="n">dcc</span><span class="p">,</span> <span class="n">html</span>
<span class="kn">from</span> <span class="nn">dash.dependencies</span> <span class="kn">import</span> <span class="n">Input</span><span class="p">,</span> <span class="n">Output</span>
<span class="kn">import</span> <span class="nn">plotly.express</span> <span class="k">as</span> <span class="nn">px</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;statesdata.csv&quot;</span><span class="p">)</span>

<span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

<span class="c1"># # Initialize the Dash app</span>
<span class="c1"># app2 = dash.Dash(__name__)</span>

<span class="c1"># # Calculate min and max values for RATE and DEATHS to set fixed color scale</span>
<span class="c1"># min_rate = df[&#39;RATE&#39;].min()</span>
<span class="c1"># max_rate = df[&#39;RATE&#39;].max()</span>
<span class="c1"># min_deaths = df[&#39;DEATHS&#39;].min()</span>
<span class="c1"># max_deaths = df[&#39;DEATHS&#39;].max()</span>

<span class="c1"># app2.layout = html.Div([</span>
<span class="c1">#     html.H1(&quot;Interactive US Map with Data Per State&quot;),</span>
<span class="c1">#     html.Label(&quot;Select Year:&quot;),</span>
<span class="c1">#     dcc.Dropdown(</span>
<span class="c1">#         id=&#39;year-dropdown&#39;,</span>
<span class="c1">#         options=[{&#39;label&#39;: year, &#39;value&#39;: year} for year in df[&#39;YEAR&#39;].unique()],</span>
<span class="c1">#         value=df[&#39;YEAR&#39;].min()</span>
<span class="c1">#     ),</span>
<span class="c1">#     dcc.Graph(id=&#39;us-map&#39;)</span>
<span class="c1"># ])</span>

<span class="c1"># @app2.callback(</span>
<span class="c1">#     Output(&#39;us-map&#39;, &#39;figure&#39;),</span>
<span class="c1">#     [Input(&#39;year-dropdown&#39;, &#39;value&#39;)]</span>
<span class="c1"># )</span>
<span class="c1"># def update_map(selected_year):</span>
    <span class="c1"># Filter data based on the selected year</span>
<span class="c1">#     filtered_df = df[df[&#39;YEAR&#39;] == selected_year]</span>

<span class="c1">#     # Create the choropleth map</span>
<span class="c1">#     fig = px.choropleth(</span>
<span class="c1">#         filtered_df,</span>
<span class="c1">#         locations=&#39;STATE&#39;,</span>
<span class="c1">#         locationmode=&#39;USA-states&#39;,</span>
<span class="c1">#         color=&#39;RATE&#39;,</span>
<span class="c1">#         scope=&#39;usa&#39;,</span>
<span class="c1">#         color_continuous_scale=&#39;Turbo&#39;,</span>
<span class="c1">#         range_color=(min_rate, max_rate),</span>
<span class="c1">#         labels={&#39;RATE&#39;: &#39;Death Rate&#39;},</span>
<span class="c1">#         hover_name=&#39;STATE&#39;,  # Show state abbreviation on hover</span>
<span class="c1">#         hover_data={&#39;RATE&#39;: True, &#39;DEATHS&#39;: True},  # Additional data to display on hover</span>
<span class="c1">#         template=&#39;plotly&#39;  # Use the plotly template for hover labels</span>
<span class="c1">#     )</span>

<span class="c1">#     fig.update_layout(</span>
<span class="c1">#         title_text=f&#39;US Data for {selected_year} - Death Rate&#39;,</span>
<span class="c1">#         geo=dict(</span>
<span class="c1">#             lakecolor=&#39;rgb(255, 255, 255)&#39;,</span>
<span class="c1">#         )</span>
<span class="c1">#     )</span>

<span class="c1">#     return fig</span>

<span class="c1"># if __name__ == &#39;__main__&#39;:</span>
<span class="c1">#     app2.run_server(debug=True)df.columns = df.columns.str.strip()</span>

<span class="c1"># Check for &#39;YEAR&#39; column</span>
<span class="k">if</span> <span class="s1">&#39;YEAR&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
    <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="s2">&quot;The &#39;YEAR&#39; column is missing or misspelled in the DataFrame.&quot;</span><span class="p">)</span>

<span class="c1"># Calculate min and max values for RATE to set fixed color scale</span>
<span class="n">min_rate</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;RATE&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
<span class="n">max_rate</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;RATE&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>

<span class="c1"># Sort years to ensure the slider goes from earliest to latest year</span>
<span class="n">years</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;YEAR&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span>

<span class="c1"># Initialize the figure</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Figure</span><span class="p">()</span>

<span class="c1"># Create a choropleth map for each year and add it to the figure</span>
<span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="n">years</span><span class="p">:</span>
    <span class="n">filtered_df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;YEAR&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">year</span><span class="p">]</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">add_trace</span><span class="p">(</span>
        <span class="n">go</span><span class="o">.</span><span class="n">Choropleth</span><span class="p">(</span>
            <span class="n">locations</span><span class="o">=</span><span class="n">filtered_df</span><span class="p">[</span><span class="s1">&#39;STATE&#39;</span><span class="p">],</span>
            <span class="n">z</span><span class="o">=</span><span class="n">filtered_df</span><span class="p">[</span><span class="s1">&#39;RATE&#39;</span><span class="p">],</span>
            <span class="n">locationmode</span><span class="o">=</span><span class="s1">&#39;USA-states&#39;</span><span class="p">,</span>
            <span class="n">colorscale</span><span class="o">=</span><span class="s1">&#39;Turbo&#39;</span><span class="p">,</span>
            <span class="n">zmin</span><span class="o">=</span><span class="n">min_rate</span><span class="p">,</span>
            <span class="n">zmax</span><span class="o">=</span><span class="n">max_rate</span><span class="p">,</span>
            <span class="n">hovertext</span><span class="o">=</span><span class="n">filtered_df</span><span class="p">[</span><span class="s1">&#39;STATE&#39;</span><span class="p">],</span>
            <span class="n">hoverinfo</span><span class="o">=</span><span class="s1">&#39;location+z+text&#39;</span><span class="p">,</span>
            <span class="n">visible</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">year</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="p">)</span>

<span class="c1"># Make the first trace visible</span>
<span class="n">fig</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">True</span>

<span class="c1"># Create sliders</span>
<span class="n">steps</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">year</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">years</span><span class="p">):</span>
    <span class="n">step</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
        <span class="n">method</span><span class="o">=</span><span class="s1">&#39;update&#39;</span><span class="p">,</span>
        <span class="n">args</span><span class="o">=</span><span class="p">[{</span><span class="s1">&#39;visible&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">j</span> <span class="o">==</span> <span class="n">i</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">fig</span><span class="o">.</span><span class="n">data</span><span class="p">))]},</span>
              <span class="p">{</span><span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s1">&#39;US Data for </span><span class="si">{</span><span class="n">year</span><span class="si">}</span><span class="s1"> - Death Rate&#39;</span><span class="p">}],</span>
        <span class="n">label</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">year</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">steps</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">step</span><span class="p">)</span>

<span class="n">sliders</span> <span class="o">=</span> <span class="p">[</span><span class="nb">dict</span><span class="p">(</span>
    <span class="n">active</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">steps</span><span class="o">=</span><span class="n">steps</span><span class="p">,</span>
    <span class="n">x</span><span class="o">=</span><span class="mf">0.02</span><span class="p">,</span>  <span class="c1"># Move the slider more to the left</span>
    <span class="n">xanchor</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">yanchor</span><span class="o">=</span><span class="s1">&#39;top&#39;</span><span class="p">,</span>
    <span class="n">pad</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">t</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
<span class="p">)]</span>

<span class="c1"># Add the sliders to the figure</span>
<span class="n">fig</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span>
    <span class="n">title_text</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;US Data for </span><span class="si">{</span><span class="n">years</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s1"> - Death Rate&#39;</span><span class="p">,</span>
    <span class="n">geo</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
        <span class="n">scope</span><span class="o">=</span><span class="s1">&#39;usa&#39;</span><span class="p">,</span>
        <span class="n">lakecolor</span><span class="o">=</span><span class="s1">&#39;rgb(255, 255, 255)&#39;</span><span class="p">,</span>
        <span class="n">projection</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s1">&#39;albers usa&#39;</span><span class="p">),</span>
        <span class="n">showlakes</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">subunitcolor</span><span class="o">=</span><span class="s2">&quot;rgb(255, 255, 255)&quot;</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="n">margin</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">l</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">50</span><span class="p">),</span>
    <span class="n">sliders</span><span class="o">=</span><span class="n">sliders</span><span class="p">,</span>
    <span class="n">height</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span>  <span class="c1"># Adjust the height as needed</span>
<span class="p">)</span>

<span class="c1"># Show the interactive map</span>
<span class="n">fig</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
</section>
</section>
<section id="third-argument-impact-on-youth">
<h3>Third argument: Impact on youth<a class="headerlink" href="#third-argument-impact-on-youth" title="Link to this heading">#</a></h3>
<section id="argument-legalization-normalizes-drug-use-and-increases-accessibility-particularly-among-young-people">
<h4>Argument: Legalization normalizes drug use and increases accessibility, particularly among young people.<a class="headerlink" href="#argument-legalization-normalizes-drug-use-and-increases-accessibility-particularly-among-young-people" title="Link to this heading">#</a></h4>
<p>DRAFT
<br>
Possible supporting Data: Correlation between drug legalization and drug use rates among youth.</p>
</section>
</section>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="reflection">
<h1>Reflection<a class="headerlink" href="#reflection" title="Link to this heading">#</a></h1>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="work-distribution">
<h1>Work Distribution<a class="headerlink" href="#work-distribution" title="Link to this heading">#</a></h1>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="references">
<h1>References<a class="headerlink" href="#references" title="Link to this heading">#</a></h1>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./docs"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Decriminalization of drugs</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#team-information">Team information</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#team-members">Team members</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#group-number">Group Number</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#team-name">Team Name</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction">Introduction</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#dataset-and-preprocessing">Dataset and Preprocessing</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#perspective-1-drugs-should-be-legalized-to-stop-drug-criminalization">Perspective 1 - Drugs should be legalized to stop drug criminalization</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#first-argument-reduction-in-crime-rates">First argument: Reduction in crime rates</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#argument-legalization-reduces-drug-related-crime">Argument: Legalization reduces drug-related crime.</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#second-argument-public-health-and-safety">Second argument: Public health and safety</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#argument-regulation-ensures-the-safety-and-quality-of-substances-reducing-harm-from-adulterated-drugs">Argument: Regulation ensures the safety and quality of substances, reducing harm from adulterated drugs.</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#third-argument-burden-on-criminal-justice-system">Third argument: Burden on criminal justice system</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#argument-legalization-alleviates-the-burden-on-the-criminal-justice-system-and-redirects-resources-to-public-health">Argument: Legalization alleviates the burden on the criminal justice system and redirects resources to public health.</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#second-perspective-drugs-should-not-be-legalized-because-of-the-potential-for-increased-addiction-and-health-issues">Second Perspective - Drugs should not be legalized because of the potential for increased addiction and health issues</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#first-argument-increase-in-addiction-rates">First argument: Increase in addiction rates</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#argument-legalization-leads-to-higher-rates-of-substance-abuse-and-addiction">Argument: Legalization leads to higher rates of substance abuse and addiction.</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#second-argument-public-health">Second argument: Public health</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#argument-increase-in-druguse-and-deaths-related-to-drugs">Argument: increase in druguse and deaths related to drugs</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#third-argument-impact-on-youth">Third argument: Impact on youth</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#argument-legalization-normalizes-drug-use-and-increases-accessibility-particularly-among-young-people">Argument: Legalization normalizes drug use and increases accessibility, particularly among young people.</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#reflection">Reflection</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#work-distribution">Work Distribution</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#references">References</a></li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Yen-Chia Hsu
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=3ee479438cf8b5e0d341"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=3ee479438cf8b5e0d341"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>